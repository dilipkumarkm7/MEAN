import{a as O,b as W,c as q,d as B,e as G,f as H,g as U,h as z}from"./chunk-KPKIUPN5.js";import{$ as y,B as _,E as s,G as i,H as o,I as A,J as x,K as c,L as m,N as p,O as V,Q as M,R as T,S as E,V as D,aa as S,ba as R,da as N,ea as P,fa as j,ga as w,ha as k,ia as F,ja as L,k as h,la as u,m as d,n as f,u as l,w as v,x as C}from"./chunk-OG767PF3.js";function ne(e,r){if(e&1&&(i(0,"p",12),p(1),o()),e&2){let t=m();l(),V(t.errorMessage)}}var I=class e{constructor(r,t){this.authservice=r;this.router=t}loginData={username:"",password:""};errorMessage="";onLogin(){this.errorMessage="";let{username:r,password:t}=this.loginData;this.authservice.login(r,t).subscribe({next:n=>{let a=n.token;localStorage.setItem("token",a),this.router.navigate(["/profile"])},error:n=>{this.errorMessage=n.errors?.message||"Login failed. Please try again later"}})}static \u0275fac=function(t){return new(t||e)(v(u),v(w))};static \u0275cmp=C({type:e,selectors:[["app-login"]],decls:20,vars:3,consts:[[1,"flex","justify-center","items-center","h-screen"],[1,"w-1/3","p-6","bg-white","rounded-lg","shadow-lg","m-auto"],[1,"text-2xl","font-semibold","mb-6","text-center"],[1,"space-y-4","w-auto",3,"submit"],["for","username",1,"block","text-gray-700","text-sm","font-medium"],["type","username","placeholder","Enter your username","required","required","name","username","id","username",1,"w-full","px-4","py-2","mt-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],["for","password",1,"block","text-gray-700","text-sm","font-medium"],["type","password","placeholder","Enter your password","required","required","name","password","id","password",1,"w-full","px-4","py-2","mt-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],["type","submit",1,"w-full","flex","items-center","justify-center","px-6","py-3","mt-4","bg-green-600","text-white","rounded-md","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","relative","group"],["class","error text-red-500 text-center mt-4",4,"ngIf"],[1,"text-center","mt-4","text-sm","text-gray-600"],["routerLink","/signup",1,"text-blue-600","hover:underline"],[1,"error","text-red-500","text-center","mt-4"]],template:function(t,n){t&1&&(i(0,"div",0)(1,"div",1)(2,"h2",2),p(3,"Login"),o(),i(4,"form",3),c("submit",function(){return n.onLogin()}),i(5,"div")(6,"label",4),p(7,"Username:"),o(),i(8,"input",5),E("ngModelChange",function(g){return T(n.loginData.username,g)||(n.loginData.username=g),g}),o()(),i(9,"div")(10,"label",6),p(11,"Password:"),o(),i(12,"input",7),E("ngModelChange",function(g){return T(n.loginData.password,g)||(n.loginData.password=g),g}),o()(),i(13,"button",8),p(14,"Login "),o()(),_(15,ne,2,1,"p",9),i(16,"p",10),p(17,"Don't have an account? "),i(18,"a",11),p(19,"Sign up here"),o()()()()),t&2&&(l(8),M("ngModel",n.loginData.username),l(4),M("ngModel",n.loginData.password),l(3),s("ngIf",n.errorMessage))},dependencies:[z,H,O,W,q,U,G,B,L,k,S,y],encapsulation:2})};var Z=(e,r)=>{let t=h(u),n=h(w);return t.isLoggedIn()?!0:(n.navigate(["/login"]),!1)};var J=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:I},{path:"signup",loadComponent:()=>import("./chunk-M7CPH7WI.js").then(e=>e.SignupComponent)},{path:"profile",loadComponent:()=>import("./chunk-AX6L36GQ.js").then(e=>e.ProfileComponent),canActivate:[Z]},{path:"**",redirectTo:"login"}];var K=(e,r)=>{let n=h(u).getToken();if(n){let a=e.clone({headers:e.headers.set("Authorization","Bearer "+n)});return r(a)}return r(e)};var Q={providers:[D({eventCoalescing:!0}),F(J),N(P([K]))]};function ie(e,r){e&1&&(i(0,"a",12),p(1,"Login"),o())}function oe(e,r){e&1&&(i(0,"a",13),p(1,"SignUp"),o())}function re(e,r){e&1&&(i(0,"a",14),p(1,"Profile"),o())}function ae(e,r){if(e&1){let t=x();i(0,"a",15),c("click",function(){d(t);let a=m();return f(a.authService.logout())}),p(1,"Logout"),o()}}function pe(e,r){if(e&1){let t=x();i(0,"a",20),c("click",function(){d(t);let a=m(2);return f(a.closeMenu())}),p(1,"Login"),o()}}function le(e,r){if(e&1){let t=x();i(0,"a",21),c("click",function(){d(t);let a=m(2);return f(a.closeMenu())}),p(1,"SignUp"),o()}}function se(e,r){if(e&1){let t=x();i(0,"a",22),c("click",function(){d(t);let a=m(2);return f(a.closeMenu())}),p(1,"Profile"),o()}}function ce(e,r){if(e&1){let t=x();i(0,"a",15),c("click",function(){d(t);let a=m(2);return a.authService.logout(),f(a.closeMenu())}),p(1,"Logout"),o()}}function me(e,r){if(e&1&&(i(0,"div",16),_(1,pe,2,0,"a",17)(2,le,2,0,"a",18)(3,se,2,0,"a",19)(4,ce,2,0,"a",6),o()),e&2){let t=m();l(),s("ngIf",!t.authService.isLoggedIn()),l(),s("ngIf",!t.authService.isLoggedIn()),l(),s("ngIf",t.authService.isLoggedIn()),l(),s("ngIf",t.authService.isLoggedIn())}}var b=class e{constructor(r){this.authService=r}menuOpen=!1;toggleMenu(){this.menuOpen=!this.menuOpen}closeMenu(){this.menuOpen=!1}static \u0275fac=function(t){return new(t||e)(v(u))};static \u0275cmp=C({type:e,selectors:[["app-root"]],decls:13,vars:5,consts:[[1,"bg-black","text-white","p-4","fixed","w-screen"],[1,"hidden","md:flex","justify-end","items-center"],[1,"flex","space-x-4"],["routerLink","/login","class","text-lg hover:text-gray-300",4,"ngIf"],["routerLink","/signup","class","text-lg hover:text-gray-300",4,"ngIf"],["routerLink","/profile","class","text-lg hover:text-gray-300",4,"ngIf"],["class","text-lg hover:text-gray-300",3,"click",4,"ngIf"],[1,"md:hidden","flex","justify-between","items-center"],[1,"text-white","text-2xl","focus:outline-none",3,"click"],[1,"fas","fa-bars"],["class","md:hidden flex flex-col space-y-4 mt-4",4,"ngIf"],[1,"bg-gradient-to-r","from-teal-500","via-blue-600","to-indigo-500","h-screen"],["routerLink","/login",1,"text-lg","hover:text-gray-300"],["routerLink","/signup",1,"text-lg","hover:text-gray-300"],["routerLink","/profile",1,"text-lg","hover:text-gray-300"],[1,"text-lg","hover:text-gray-300",3,"click"],[1,"md:hidden","flex","flex-col","space-y-4","mt-4"],["routerLink","/login","class","text-lg hover:text-gray-300",3,"click",4,"ngIf"],["routerLink","/signup","class","text-lg hover:text-gray-300",3,"click",4,"ngIf"],["routerLink","/profile","class","text-lg hover:text-gray-300",3,"click",4,"ngIf"],["routerLink","/login",1,"text-lg","hover:text-gray-300",3,"click"],["routerLink","/signup",1,"text-lg","hover:text-gray-300",3,"click"],["routerLink","/profile",1,"text-lg","hover:text-gray-300",3,"click"]],template:function(t,n){t&1&&(i(0,"nav",0)(1,"div",1)(2,"div",2),_(3,ie,2,0,"a",3)(4,oe,2,0,"a",4)(5,re,2,0,"a",5)(6,ae,2,0,"a",6),o()(),i(7,"div",7)(8,"button",8),c("click",function(){return n.toggleMenu()}),A(9,"i",9),o()(),_(10,me,5,4,"div",10),o(),i(11,"div",11),A(12,"router-outlet"),o()),t&2&&(l(3),s("ngIf",!n.authService.isLoggedIn()),l(),s("ngIf",!n.authService.isLoggedIn()),l(),s("ngIf",n.authService.isLoggedIn()),l(),s("ngIf",n.authService.isLoggedIn()),l(4),s("ngIf",n.menuOpen))},dependencies:[j,L,k,S,y],styles:["nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;margin-right:10px;cursor:pointer;text-decoration:none}"]})};R(b,Q).catch(e=>console.error(e));
